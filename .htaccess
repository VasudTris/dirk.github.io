<IfModule mod_rewrite.c>
    RewriteEngine On

    # Controleer of HTTPS uit staat
    RewriteCond %{HTTPS} off

    # Onderstaande 2 regels zijn voor domeinen met proxy
    # Deze regels geven geen problemen bij domeinen zonder proxy
    RewriteCond %{HTTP:X-Forwarded-Proto} !https
    SetEnvIf X-Forwarded-Proto "https" HTTPS=on

    # Forceer HTTPS
    RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

    # Voeg www toe aan de domeinnaam als het niet al aanwezig is
    RewriteCond %{HTTP_HOST} !^www\. [NC]
    RewriteRule .* https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</IfModule>
